<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="alcool.css">
	<script type="text/javascript">
		window.addEventListener("load",function () {
			let but = document.getElementById("addAlcool");
			but.addEventListener("click", function () {
				let cln = document.getElementById("modele").cloneNode(true);
				but.parentNode.parentNode.parentNode.insertBefore(cln, but.parentNode.parentNode);
				cln.removeAttribute("hidden");
				cln.removeAttribute("id");

				cln.getElementsByClassName("del")[0].addEventListener("click", function () {
					this.parentNode.parentNode.removeChild(this.parentNode);
				});

				editAlcool();
				function editAlcool() {
					cln.getElementsByClassName("del")[0].addEventListener("click", function () {
						this.parentNode.parentNode.removeChild(this.parentNode);
					});
					cln.getElementsByClassName("valid")[0].addEventListener("click", function () {
						cln.innerHTML =
						"<td class='input1'>"+cln.children[0].children[0].value+"</td>"+
						"<td class='input2'>"+cln.children[1].children[0].value+"</td>"+
						"<td class='input3'>"+cln.children[2].children[0].value+"</td>"+
						"<td class='select1'>"+cln.children[3].children[0].value+"</td>"+
						"<td class='input4'>"+cln.children[4].children[0].value+"</td>"+
						"<td class='select2'>"+cln.children[5].children[0].value+"</td>"+
						"<td class='tools valid' hidden><img class='show' src='image/ok grey.png'><img class='hover' src='image/ok black.png'></td><td class='tools del' hidden><img class='show' src='image/trash grey.png'><img class='hover' src='image/trash black.png'></td><td class='tools edit'><img class='show' src='image/edit grey.png'><img class='hover' src='image/edit black.png'></td>"+
						"";
						cln.getElementsByClassName("edit")[0].addEventListener("click", function () {
							let select1;
							switch(cln.childNodes[3].innerText) {
								case '5.5':
									select1 = "<option selected>5.5</option>"+
											  "<option>10</option>"+
											  "<option>20</option>";
									break;
								case '10':
									select1 = "<option>5.5</option>"+
											  "<option selected>10</option>"+
											  "<option>20</option>";
									break;
								case '20':
									select1 = "<option>5.5</option>"+
											  "<option>10</option>"+
											  "<option selected>20</option>";
									break;
								default:
									select1 = "<option disabled='' selected=''></option>"+
											  "<option>5.5</option>"+
											  "<option>10</option>"+
											  "<option>20</option>";
									break;
							}
							let select2;
							switch(cln.childNodes[5].innerText) {
								case 'Bouteille':
									select2 = "<option selected>Bouteille</option>"+
											  "<option>Brick</option>"+
											  "<option>Pack</option>"+
											  "<option>Cubi</option>";
									break;
								case 'Brick':
									select2 = "<option selected>Bouteille</option>"+
											  "<option>Brick</option>"+
											  "<option>Pack</option>"+
											  "<option>Cubi</option>";
									break;
								case 'Pack':
									select2 = "<option selected>Bouteille</option>"+
											  "<option>Brick</option>"+
											  "<option>Pack</option>"+
											  "<option>Cubi</option>";
									break;
								case 'Cubi':
									select2 = "<option selected>Bouteille</option>"+
											  "<option>Brick</option>"+
											  "<option>Pack</option>"+
											  "<option>Cubi</option>";
									break;
								default:
									select2 = "<option disabled='' selected=''></option>"+
											  "<option>Bouteille</option>"+
											  "<option>Brick</option>"+
											  "<option>Pack</option>"+
											  "<option>Cubi</option>";
									break;
							}
							cln.innerHTML = 
							"<td class='input1'><input type='text' name='nom' value='"+cln.childNodes[0].innerText+"'></td>"+
							"<td class='input2'><input type='text' name='marque' value='"+cln.childNodes[1].innerText+"'></td>"+
							"<td class='input3'><input type='number' name='prixHT' min='0' step='0.001' value='"+cln.childNodes[2].innerText+"'></td>"+
							"<td class='select1'>"+
								"<select name='TVA'>"+
									select1 +
								"</select>"+
							"</td>"+
							"<td class='input4'><input type='number' name='volume' min='0' step='0.01' value='"+cln.childNodes[4].innerText+"'></td>"+
							"<td class='select2'>"+
								"<select name='type'>"+
									select2 +
								"</select>"+
							"</td>"+
							"<td class='tools valid'>"+
								"<img class='show' src='image/ok grey.png'>"+
								"<img class='hover' src='image/ok black.png'>"+
							"</td>"+
							"<td class='tools del'>"+
								"<img class='show' src='image/trash grey.png'>"+
								"<img class='hover' src='image/trash black.png'>"+
							"</td>"+
							"<td class='tools edit' hidden>"+
								"<img class='show' src='image/edit grey.png'>"+
								"<img class='hover' src='image/edit black.png'>"+
							"</td>";
							editAlcool();
						});
					});
				}
			});
		});
	</script>
</head>
<body>
	<table id="listeAlcool">
		<tr>
			<th>Nom</th>
			<th>Marque</th>
			<th>Prix HT</th>
			<th>TVA (%)</th>
			<th>Volume de vente (en L)</th>
			<th>Type</th>
		</tr>
		<tr id="modele" hidden>
			<td class='input1'><input type='text' name='nom'></td>
			<td class='input2'><input type='text' name='marque'></td>
			<td class='input3'><input type='number' name='prixHT' min='0' step='0.001'></td>
			<td class='select1'>
				<select name='TVA'>
					<option disabled='' selected=''></option>
					<option>5.5</option>
					<option>10</option>
					<option>20</option>
				</select>
			</td>
			<td class='input4'><input type='number' name='volume' min='0' step='0.01'></td>
			<td class='select2'>
				<select name='type'>
					<option disabled='' selected=''></option>
					<option>Bouteille</option>
					<option>Brick</option>
					<option>Pack</option>
					<option>Cubi</option>
				</select>
			</td>
			<td class='tools valid'>
				<img class='show' src='image/ok grey.png'>
				<img class='hover' src='image/ok black.png'>
			</td>
			<td class='tools del'>
				<img class='show' src='image/trash grey.png'>
				<img class='hover' src='image/trash black.png'>
			</td>
			<td class='tools edit' hidden>
				<img class='show' src='image/edit grey.png'>
				<img class='hover' src='image/edit black.png'>
			</td>
		</tr>
		<tr>
			<td colspan="6"><button id="addAlcool">Ajouter un alcool</button></td>			
		</tr>
	</table>


</body>
</html>